@page
@model GomelStateUniversity_Activity.Areas.Functionality.Pages.Psychologist.IndexModel

@using Microsoft.JSInterop
@inject IJSRuntime JS

@{
    ViewData["Title"] = "Консультации психолога";
}

<h4>Консультация у #ПсихологНейм</h4>
<hr />

<form class="col-md-9" asp-route-returnUrl="@Model.ReturnUrl" method="post">
    <div class="form-group">
        <div class="mb-5">
            <div class="form-group">
                <label asp-for="Input.Date"></label>
                <div class="row">
                    <input asp-for="Input.Date" class="form-control col-md-4" />
                    <button asp-route-dateUpdated="@true" class="btn btn-outline-primary mx-5" type="submit">Проверить</button>
                </div>
                <span asp-validation-for="Input.Date" class="text-danger"></span>
            </div>

            @if (@Model.isDateValid)
            {
                <div class="form-group">
                    <label asp-for="Input.Time"></label>
                    <input asp-for="Input.Time" step="3600" list="timeList" class="form-control col-md-4" />
                    <span asp-validation-for="Input.Time" class="text-danger"></span>
                </div>
                <button asp-route-timeSelected="@true" class="btn btn-primary" type="submit">Записаться</button>
            }
        </div>
    </div>
</form>


@if (@Model.isDateValid)
{
    <datalist id="timeList" >
        @for(int i = 9; i < 17; i++)
        {
            if (!(@Model.scheduledHours.Select(s => s.Hour).AsEnumerable()).Contains(i))
            {
                string time = i.ToString("00") + ":00";
                <option value="@time" datatype="time" />
            }
        }
    </datalist>
}

